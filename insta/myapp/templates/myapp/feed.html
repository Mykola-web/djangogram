{% extends 'myapp/base.html' %}

{% block title%}Feed{% endblock %}

{% block extra_css%}
    {% load static %}
    <link href="{% static 'profile-feed.css' %}" rel="stylesheet">
{% endblock %}

{% block navigation %}

  <li><button class="white-btn" onclick="location.href='/profile'">PROFILE</button></li>

{% endblock %}

{% block content %}
<div class="feed_wrapper">
  <div class="feed_post_container">
      {% for post in posts %}
          <div class="post">
              <div class="post-author">
                  <a href="/profile/{{ post.author.username }}" class="author-avatar">
                    {% if post.author.profile.avatar %}
					    <img src="{{ post.author.profile.avatar.url }}" alt="Avatar">
				    {% else %}
					    <img src="https://res.cloudinary.com/dnctmhqcl/image/upload/default_avatar_gruuhe" alt="Default Avatar">
				    {% endif %}
                  </a>
                  <a href="/profile/{{ post.author.username }}" class="author-name">{{ post.author.username }}</a>
              </div>
              <p>{{ post.text }}</p>
          <div>
          <div class="tags-container">
                {% for tag in post.tags.all %}
                    <span><a href="">{{ tag.name }}</a></span>
                {% empty %}
                    <p></p>
                {% endfor %}
          </div>
          </div>
            {% if post.images.all %}

            {% for image in post.images.all %}
                <img src="{{ image.image.url }}" alt="Post Image" loading="lazy" />
            {% endfor %}
            {% endif %}
              <div class="post-footer">
                  <p>{{ post.created_at }}</p>
                  <div class="like-button-container">
                      <div id="like-button-{{ post.id }}" style="width:40px; height:40px; cursor:pointer;"></div>
                      <a href="#" class="likes-count" onclick="showLikes({{ post.id }})">{{ post.likes.count }}</a>
                  </div>
              </div>
          </div>
      {% endfor %}
  </div>
</div>
<script src="{% static 'dist/bundle.js' %}"></script>
{% endblock %}
